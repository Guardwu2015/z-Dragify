(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){module.exports=t()}else{e.Dragify=t()}})(this,function(){var e=function(){this.events={}};e.prototype={construct:e,on:function(e,t){this._getEventInfo(e).push(t);return this},trigger:function(e){var t=this._getEventInfo(e);var n=Array.prototype.slice.call(arguments,1);t.forEach(function(e){e.apply(e,n)});return this},_getEventInfo:function(e){if(!this.events[e])this.events[e]=[];return this.events[e]},remove:function(e,t){var n=this._getEventInfo(e);if(!t){this.events[e]=[]}else{n.splice(n.indexOf(t),1)}return this}};function t(t){this.$elem=t;this.watcher=new e;this.init()}t.prototype={constructor:t,init:function(){var e=this;e.$elem.addEventListener(n[0],function(t){var o=e._getEventInfo(t);var i=e.$elem.offsetParent;var r=o.clientX-e.$elem.offsetLeft;var s=o.clientY-e.$elem.offsetTop;var c=i.offsetLeft||0;var f=i.offsetTop||0;var u=document.documentElement.clientWidth;var a=document.documentElement.clientHeight;var v=e.$elem.offsetWidth;var h=e.$elem.offsetHeight;var m=getComputedStyle(e.$elem).zIndex;e.watcher.trigger("start",e.$elem);document.addEventListener(n[1],l);function l(t){var n=e._getEventInfo(t);var o=n.clientX-r;var i=n.clientY-s;if(o+c<0)o=o-(o+c);if(i+f<0)i=i-(i+f);if(o+c+v>u)o=u-(c+v);if(i+f+h>a)i=a-(f+h);e.$elem.style.position="absolute";e.$elem.style.left=o+"px";e.$elem.style.top=i+"px";e.$elem.style.zIndex=19911125;e.watcher.trigger("move",e.$elem)}document.addEventListener(n[2],d);function d(t){document.removeEventListener(n[1],l);document.removeEventListener(n[2],d);e.$elem.style.zIndex=m;e.watcher.trigger("end",e.$elem)}})},on:function(){this.watcher.on.apply(this.watcher,arguments);return this.watcher},_getEventInfo:function(e){return t.isTouch()?e.targetTouches[0]:e}};t.isTouch=function(e){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0};var n=t.isTouch()?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];return t});