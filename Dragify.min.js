(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){module.exports=t()}else{e.Dragify=t()}})(this,function(){var e=function(){this._events={};this._tempEvents={}};e.prototype={construct:e,on:function(e,t){this._getEvent(e).push(t);var n=this._getEvent(e,true);while(n.length){t.apply(t,n.shift())}return this},emit:function(e){var t=this._getEvent(e);var n=Array.prototype.slice.call(arguments,1);if(t.length){t.forEach(function(e){e.apply(e,n)})}else{this._getEvent(e,true).push(n)}return this},_getEvent:function(e,t){var n=t?"_tempEvents":"_events";if(!this[n][e])this[n][e]=[];return this[n][e]},off:function(e,t){var n=this._getEvent(e);if(!t){this._events[e]=[]}else{n.splice(n.indexOf(t),1)}return this}};function t(t){e.call(this);this.$elem=t;this.disabled=false;this.init()}t.prototype=Object.create(e.prototype);Object.assign(t.prototype,{constructor:t,init:function(){var e=this;this.on("disabled",function(){e.disabled=true});this.on("enabled",function(){e.disabled=false});e.$elem.addEventListener(n[0],function(t){if(e.disabled)return;var i=e._getEventInfo(t);var o=e.$elem.offsetParent;var s=i.clientX-e.$elem.offsetLeft;var r=i.clientY-e.$elem.offsetTop;var a=o.offsetLeft||0;var c=o.offsetTop||0;var l=document.documentElement.clientWidth;var u=document.documentElement.clientHeight;var f=e.$elem.offsetWidth;var m=e.$elem.offsetHeight;var d=getComputedStyle(e.$elem).zIndex;e.$elem.classList.add("drag-start");e.emit("start",e.$elem);document.addEventListener(n[1],v);function v(t){var n=e._getEventInfo(t);var i=n.clientX-s;var o=n.clientY-r;if(i+a<0)i=i-(i+a);if(o+c<0)o=o-(o+c);if(i+a+f>l)i=l-(a+f);if(o+c+m>u)o=u-(c+m);e.$elem.style.position="absolute";e.$elem.style.left=i+"px";e.$elem.style.top=o+"px";e.$elem.style.zIndex=19911125;e.$elem.classList.add("drag-move");e.emit("move",e.$elem)}document.addEventListener(n[2],h);function h(t){document.removeEventListener(n[1],v);document.removeEventListener(n[2],h);e.$elem.style.zIndex=d;e.$elem.classList.remove("drag-start");e.$elem.classList.remove("drag-move");e.emit("end",e.$elem)}})},_getEventInfo:function(e){return t.isTouch()?e.targetTouches[0]:e}});t.isTouch=function(e){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0};var n=t.isTouch()?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"];return t});